(function(a,b){typeof exports=='object'&&typeof module!='undefined'?module.exports=b():typeof define=='function'&&define.amd?define(b):(a=typeof globalThis!='undefined'?globalThis:a||self,a.Fuse=b())})(this,function(){'use strict';var L,z,I,B,C,D,E,F,p,H,M,N,O,P,a,R,j,e,V,s,l,h,n,G,Q,r,f,X;function S(a,d){var b=Object.keys(a),c;return Object.getOwnPropertySymbols&&(c=Object.getOwnPropertySymbols(a),d&&(c=c.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),b.push.apply(b,c)),b}function g(c){for(var a=1,b;a<arguments.length;a++)b=null!=arguments[a]?arguments[a]:{},a%2?S(Object(b),!0).forEach(function(a){u(c,a,b[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(b)):S(Object(b)).forEach(function(a){Object.defineProperty(c,a,Object.getOwnPropertyDescriptor(b,a))});return c}function v(a){"@babel/helpers - typeof";return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},v(a)}function k(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function T(d,c){for(var b=0,a;b<c.length;b++)a=c[b],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}function i(a,b,c){return b&&T(a.prototype,b),c&&T(a,c),Object.defineProperty(a,"prototype",{writable:!1}),a}function u(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function t(a){return ao(a)||an(a)||ah(a)||ag()}function ao(a){if(Array.isArray(a))return o(a)}function an(a){if(typeof Symbol!="undefined"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function ah(a,c){if(!a)return;if(typeof a=="string")return o(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if(b==="Object"&&a.constructor&&(b=a.constructor.name),b==="Map"||b==="Set")return Array.from(a);if(b==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return o(a,c)}function o(c,a){(a==null||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function ag(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(a){return Array.isArray?Array.isArray(a):W(a)==='[object Array]'}L=1/0;function af(a){if(typeof a=='string')return a;var b=a+'';return b=='0'&&1/a==-L?'-0':b}function ae(a){return a==null?'':af(a)}function c(a){return typeof a=='string'}function A(a){return typeof a=='number'}function ad(a){return a===!0||a===!1||ac(a)&&W(a)=='[object Boolean]'}function y(a){return v(a)==='object'}function ac(a){return y(a)&&a!==null}function b(a){return a!==void 0&&a!==null}function w(a){return!a.trim().length}function W(a){return a==null?a===void 0?'[object Undefined]':'[object Null]':Object.prototype.toString.call(a)}z='Extended search is not available',I='Logical search is not available',B="Incorrect 'index' type",C=function(a){return"Invalid value for key ".concat(a)},D=function(a){return"Pattern length exceeds max of ".concat(a,".")},E=function(a){return"Missing ".concat(a," property in key")},F=function(a){return"Property 'weight' in key '".concat(a,"' must be a positive integer")},p=Object.prototype.hasOwnProperty,H=function(){function a(d){var c=this,b;k(this,a),this._keys=[],this._keyMap={},b=0,d.forEach(function(d){var a=K(d);b+=a.weight,c._keys.push(a),c._keyMap[a.id]=a,b+=a.weight}),this._keys.forEach(function(a){a.weight/=b})}return i(a,[{key:"get",value:function(a){return this._keyMap[a]}},{key:"keys",value:function(){return this._keys}},{key:"toJSON",value:function(){return JSON.stringify(this._keys)}}]),a}();function K(a){var e=null,f=null,g=null,h=1,i=null,b;if(c(a)||d(a))g=a,e=J(a),f=x(a);else{if(!p.call(a,'name'))throw new Error(E('name'));if(b=a.name,g=b,p.call(a,'weight'))if(h=a.weight,h<=0)throw new Error(F(b));e=J(b),f=x(b),i=a.getFn}return{path:e,id:f,weight:h,src:g,getFn:i}}function J(a){return d(a)?a:a.split('.')}function x(a){return d(a)?a.join('.'):a}function ab(g,e){var a=[],f=!1,h=function l(j,g,h){var k,e,i,m;if(!b(j))return;if(g[h]){if(k=g[h],e=j[k],!b(e))return;if(h===g.length-1&&(c(e)||A(e)||ad(e)))a.push(ae(e));else if(d(e)){f=!0;for(i=0,m=e.length;i<m;i+=1)l(e[i],g,h+1)}else g.length&&l(e,g,h+1)}else a.push(j)};return h(g,c(e)?e.split('.'):e,0),f?a:a[0]}M={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},N={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:function(a,b){return a.score===b.score?a.idx<b.idx?-1:1:a.score<b.score?-1:1}},O={location:0,threshold:.6,distance:100},P={useExtendedSearch:!1,getFn:ab,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1},a=g(g(g(g({},N),M),O),P),R=/[^ ]+/g;function aa(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,a=new Map,b=Math.pow(10,d);return{get:function(f){var d=f.match(R).length,g,e;return a.has(d)?a.get(d):(g=1/Math.pow(d,.5*c),e=parseFloat(Math.round(g*b)/b),a.set(d,e),e)},clear:function(){a.clear()}}}j=function(){function e(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=b.getFn,f=c===void 0?a.getFn:c,d=b.fieldNormWeight,g=d===void 0?a.fieldNormWeight:d;k(this,e),this.norm=aa(g,3),this.getFn=f,this.isCreated=!1,this.setIndexRecords()}return i(e,[{key:"setSources",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.docs=a}},{key:"setIndexRecords",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.records=a}},{key:"setKeys",value:function(){var b=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.keys=a,this._keysMap={},a.forEach(function(a,c){b._keysMap[a.id]=c})}},{key:"create",value:function(){var a=this;if(this.isCreated||!this.docs.length)return;this.isCreated=!0,c(this.docs[0])?this.docs.forEach(function(b,c){a._addString(b,c)}):this.docs.forEach(function(b,c){a._addObject(b,c)}),this.norm.clear()}},{key:"add",value:function(a){var b=this.size();c(a)?this._addString(a,b):this._addObject(a,b)}},{key:"removeAt",value:function(b){this.records.splice(b,1);for(var a=b,c=this.size();a<c;a+=1)this.records[a].i-=1}},{key:"getValueForItemAtKeyId",value:function(a,b){return a[this._keysMap[b]]}},{key:"size",value:function(){return this.records.length}},{key:"_addString",value:function(a,c){if(!b(a)||w(a))return;var d={v:a,i:c,n:this.norm.get(a)};this.records.push(d)}},{key:"_addObject",value:function(f,g){var a=this,e={i:g,$:{}};this.keys.forEach(function(h,i){var g=h.getFn?h.getFn(f):a.getFn(f,h.path),j;if(!b(g))return;d(g)?function(){for(var j=[],h=[{nestedArrIndex:-1,value:g}],k,l,f,m;h.length;){if(k=h.pop(),l=k.nestedArrIndex,f=k.value,!b(f))continue;c(f)&&!w(f)?(m={v:f,i:l,n:a.norm.get(f)},j.push(m)):d(f)&&f.forEach(function(a,b){h.push({nestedArrIndex:b,value:a})})}e.$[i]=j}():c(g)&&!w(g)&&(j={v:g,n:a.norm.get(g)},e.$[i]=j)}),this.records.push(e)}},{key:"toJSON",value:function(){return{keys:this.keys,records:this.records}}}]),e}();function U(f,i){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=c.getFn,g=d===void 0?a.getFn:d,e=c.fieldNormWeight,h=e===void 0?a.fieldNormWeight:e,b=new j({getFn:g,fieldNormWeight:h});return b.setKeys(f.map(K)),b.setSources(i),b.create(),b}function $(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=d.getFn,g=f===void 0?a.getFn:f,e=d.fieldNormWeight,h=e===void 0?a.fieldNormWeight:e,i=c.keys,k=c.records,b=new j({getFn:g,fieldNormWeight:h});return b.setKeys(i),b.setIndexRecords(k),b}function m(o){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=b.errors,n=e===void 0?0:e,f=b.currentLocation,l=f===void 0?0:f,h=b.expectedLocation,k=h===void 0?0:h,j=b.distance,d=j===void 0?a.distance:j,g=b.ignoreLocation,m=g===void 0?a.ignoreLocation:g,c=n/o.length,i;return m?c:(i=Math.abs(k-l),!d)?i?1:c:c+i/d}function Y(){for(var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.minMatchCharLength,e=[],b=-1,f=-1,c=0,i=d.length,h;c<i;c+=1)h=d[c],h&&b===-1?b=c:!h&&b!==-1&&(f=c-1,f-b+1>=g&&e.push([b,f]),b=-1);return d[c-1]&&c-b>=g&&e.push([b,c-1]),e}e=32;function Z(z,f,S){var h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},H=h.location,R=H===void 0?a.location:H,L=h.distance,s=L===void 0?a.distance:L,K=h.threshold,W=K===void 0?a.threshold:K,O=h.findAllMatches,T=O===void 0?a.findAllMatches:O,E=h.minMatchCharLength,F=E===void 0?a.minMatchCharLength:E,I=h.includeMatches,J=I===void 0?a.includeMatches:I,N=h.ignoreLocation,w=N===void 0?a.ignoreLocation:N,l,n,b,k,g,q,B,p,V,A,o,r,v,Q,i,t,d,P,C,y,j,c,u,G,U,x,M;if(f.length>e)throw new Error(D(e));for(l=f.length,n=z.length,b=Math.max(0,Math.min(R,n)),k=W,g=b,q=F>1||J,B=q?Array(n):[];(p=z.indexOf(f,g))>-1;)if(V=m(f,{currentLocation:p,expectedLocation:b,distance:s,ignoreLocation:w}),k=Math.min(V,k),g=p+l,q)for(A=0;A<l;)B[p+A]=1,A+=1;g=-1,o=[],r=1,v=l+n,Q=1<<l-1;for(i=0;i<l;i+=1){for(t=0,d=v;t<d;)P=m(f,{errors:i,currentLocation:b+d,expectedLocation:b,distance:s,ignoreLocation:w}),P<=k?t=d:v=d,d=Math.floor((v-t)/2+t);v=d,C=Math.max(1,b-d+1),y=T?n:Math.min(b+d,n)+l,j=Array(y+2),j[y+1]=(1<<i)-1;for(c=y;c>=C;c-=1)if(u=c-1,G=S[z.charAt(u)],q&&(B[u]=+!!G),j[c]=(j[c+1]<<1|1)&G,i&&(j[c]|=(o[c+1]|o[c])<<1|1|o[c+1]),j[c]&Q)if(r=m(f,{errors:i,currentLocation:u,expectedLocation:b,distance:s,ignoreLocation:w}),r<=k){if(k=r,g=u,g<=b)break;C=Math.max(1,2*b-g)}if(U=m(f,{errors:i+1,currentLocation:b,expectedLocation:b,distance:s,ignoreLocation:w}),U>k)break;o=j}return x={isMatch:g>=0,score:Math.max(.001,r)},q&&(M=Y(B,F),M.length?J&&(x.indices=M):x.isMatch=!1),x}function _(c){for(var b={},a=0,d=c.length,e;a<d;a+=1)e=c.charAt(a),b[e]=(b[e]||0)|1<<d-a-1;return b}V=function(){function b(q){var A=this,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},j=c.location,z=j===void 0?a.location:j,i=c.threshold,y=i===void 0?a.threshold:i,l=c.distance,x=l===void 0?a.distance:l,n=c.includeMatches,v=n===void 0?a.includeMatches:n,p=c.findAllMatches,C=p===void 0?a.findAllMatches:p,r=c.minMatchCharLength,u=r===void 0?a.minMatchCharLength:r,h=c.isCaseSensitive,s=h===void 0?a.isCaseSensitive:h,o=c.ignoreLocation,w=o===void 0?a.ignoreLocation:o,g,f,d,m,B,t;if(k(this,b),this.options={location:z,threshold:y,distance:x,includeMatches:v,findAllMatches:C,minMatchCharLength:u,isCaseSensitive:s,ignoreLocation:w},this.pattern=s?q:q.toLowerCase(),this.chunks=[],!this.pattern.length)return;if(g=function(a,b){A.chunks.push({pattern:a,alphabet:_(a),startIndex:b})},f=this.pattern.length,f>e){for(d=0,m=f%e,B=f-m;d<B;)g(this.pattern.substr(d,e),d),d+=e;m&&(t=f-e,g(this.pattern.substr(t),t))}else g(this.pattern,0)}return i(b,[{key:"searchIn",value:function(b){var f=this.options,p=f.isCaseSensitive,d=f.includeMatches,g,a,o,j,n,k,l,m,e,h,c,i;return p||(b=b.toLowerCase()),this.pattern===b?(g={isMatch:!0,score:0},d&&(g.indices=[[0,b.length-1]]),g):(a=this.options,o=a.location,j=a.distance,n=a.threshold,k=a.findAllMatches,l=a.minMatchCharLength,m=a.ignoreLocation,e=[],h=0,c=!1,this.chunks.forEach(function(a){var s=a.pattern,p=a.alphabet,q=a.startIndex,f=Z(b,s,p,{location:o+q,distance:j,threshold:n,findAllMatches:k,minMatchCharLength:l,includeMatches:d,ignoreLocation:m}),i=f.isMatch,r=f.score,g=f.indices;i&&(c=!0),h+=r,i&&g&&(e=[].concat(t(e),t(g)))}),i={isMatch:c,score:c?h/this.chunks.length:1},c&&d&&(i.indices=e),i)}}]),b}(),s=[];function q(a,b){for(var c=0,e=s.length,d;c<e;c+=1)if(d=s[c],d.condition(a,b))return new d(a,b);return new V(a,b)}l={AND:'$and',OR:'$or'},h={PATH:'$path',PATTERN:'$val'},n=function(a){return!!(a[l.AND]||a[l.OR])},G=function(a){return!!a[h.PATH]},Q=function(a){return!d(a)&&y(a)&&!n(a)},r=function(a){return u({},l.AND,Object.keys(a).map(function(b){return u({},b,a[b])}))};function ai(a,e){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},b=f.auto,g=b===void 0||b,i=function k(a){var b=Object.keys(a),f=G(a),i,j,l,m;if(!f&&b.length>1&&!n(a))return k(r(a));if(Q(a)){if(i=f?a[h.PATH]:b[0],j=f?a[h.PATTERN]:a[i],!c(j))throw new Error(C(i));return l={keyId:x(i),pattern:j},g&&(l.searcher=q(j,e)),l}return m={children:[],operator:b[0]},b.forEach(function(c){var b=a[c];d(b)&&b.forEach(function(a){m.children.push(k(a))})}),m};return n(a)||(a=r(a)),i(a)}function aj(c,d){var b=d.ignoreFieldNorm,e=b===void 0?a.ignoreFieldNorm:b;c.forEach(function(a){var b=1;a.matches.forEach(function(a){var c=a.key,g=a.norm,d=a.score,f=c?c.weight:null;b*=Math.pow(d===0&&f?Number.EPSILON:d,(f||1)*(e?1:g))}),a.score=b})}function ak(d,a){var c=d.matches;if(a.matches=[],!b(c))return;c.forEach(function(c){var e,f,d;if(!b(c.indices)||!c.indices.length)return;e=c.indices,f=c.value,d={indices:e,value:f},c.key&&(d.key=c.key.src),c.idx>-1&&(d.refIndex=c.idx),a.matches.push(d)})}function al(a,b){b.score=a.score}function am(f,i){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=c.includeMatches,g=d===void 0?a.includeMatches:d,e=c.includeScore,h=e===void 0?a.includeScore:e,b=[];return g&&b.push(ak),h&&b.push(al),f.map(function(a){var c=a.idx,d={item:i[c],refIndex:c};return b.length&&b.forEach(function(b){b(a,d)}),d})}return f=function(){function e(b){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=arguments.length>2?arguments[2]:void 0;if(k(this,e),this.options=g(g({},a),c),this.options.useExtendedSearch&&!!1)throw new Error(z);this._keyStore=new H(this.options.keys),this.setCollection(b,d)}return i(e,[{key:"setCollection",value:function(b,a){if(this._docs=b,a&&!(a instanceof j))throw new Error(B);this._myIndex=a||U(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}},{key:"add",value:function(a){if(!b(a))return;this._docs.push(a),this._myIndex.add(a)}},{key:"remove",value:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){return!1},b=[],a=0,c=this._docs.length,d;a<c;a+=1)d=this._docs[a],e(d,a)&&(this.removeAt(a),a-=1,c-=1,b.push(d));return b}},{key:"removeAt",value:function(a){this._docs.splice(a,1),this._myIndex.removeAt(a)}},{key:"getIndex",value:function(){return this._myIndex}},{key:"search",value:function(d){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=h.limit,e=f===void 0?-1:f,a=this.options,g=a.includeMatches,i=a.includeScore,j=a.shouldSort,k=a.sortFn,l=a.ignoreFieldNorm,b=c(d)?c(this._docs[0])?this._searchStringList(d):this._searchObjectList(d):this._searchLogical(d);return aj(b,{ignoreFieldNorm:l}),j&&b.sort(k),A(e)&&e>-1&&(b=b.slice(0,e)),am(b,this._docs,{includeMatches:g,includeScore:i})}},{key:"_searchStringList",value:function(c){var d=q(c,this.options),e=this._myIndex.records,a=[];return e.forEach(function(e){var c=e.v,g=e.i,h=e.n,f,i,j,k;if(!b(c))return;f=d.searchIn(c),i=f.isMatch,j=f.score,k=f.indices,i&&a.push({item:c,idx:g,matches:[{score:j,value:c,norm:h,indices:k}]})}),a}},{key:"_searchLogical",value:function(b){throw new Error(I)}},{key:"_searchObjectList",value:function(h){var e=this,f=q(h,this.options),c=this._myIndex,g=c.keys,d=c.records,a=[];return d.forEach(function(h){var d=h.$,i=h.i,c;if(!b(d))return;c=[],g.forEach(function(a,b){c.push.apply(c,t(e._findMatches({key:a,value:d[b],searcher:f})))}),c.length&&a.push({idx:i,item:d,matches:c})}),a}},{key:"_findMatches",value:function(c){var i=c.key,a=c.value,h=c.searcher,f,g,j,e,k,l,m;return b(a)?(f=[],d(a)?a.forEach(function(a){var c=a.v,e=a.i,g=a.n,d,j,k,l;if(!b(c))return;d=h.searchIn(c),j=d.isMatch,k=d.score,l=d.indices,j&&f.push({score:k,key:i,value:c,idx:e,norm:g,indices:l})}):(g=a.v,j=a.n,e=h.searchIn(g),k=e.isMatch,l=e.score,m=e.indices,k&&f.push({score:l,key:i,value:g,norm:j,indices:m})),f):[]}}]),e}(),f.version='6.6.2',f.createIndex=U,f.parseIndex=$,f.config=a,f.parseQuery=ai,X=f,X});let fuse=void 0,firstRun=!0;function doSearch(a,b){if(!a){document.getElementById("searchResults").innerHTML='';return}document.getElementById("searchResults").innerHTML=a.search(b).map(b=>{const a=b.item;return`<li>
        <a href="${a.permalink}" tabindex="0">
          <span class="title">${a.title}</span>
        </a>
      </li>`}).join('')}async function initFuse(){return await fetch('/~breadbuster/index.json').then(a=>a.json()).then(a=>{firstRun=!1;const b={includeScore:!0,includeMatches:!0,ignoreLocation:!0,threshold:0,keys:[{name:'title',weight:100},{name:'tags',weight:80},{name:'keywords',weight:80},{name:'description',weight:60},{name:'contents',weight:10}]},c=Fuse.createIndex(b.keys,a);return new Fuse(a,b,c)})}document.getElementById("searchInput").onkeydown=function(a){firstRun&&initFuse().then(a=>{fuse=a})},document.getElementById("searchInput").onkeyup=function(a){doSearch(fuse,this.value)}